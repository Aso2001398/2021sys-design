```uml
@startuml
opt 未登録
ユーザー -> webサーバー : ユーザー登録
webサーバー -> DBサーバー:ユーザー登録
DBサーバー -> DBサーバー:登録処理

alt 認証成功
webサーバー -> ユーザー:ユーザー名を表示
else 認証失敗
webサーバー -> ユーザー:失敗メッセージを表示

end

end

ユーザー -> webサーバー : ログイン
webサーバー -> DBサーバー:ログイン照会
DBサーバー -> DBサーバー:ログイン処理
DBサーバー -> webサーバー:認証結果
webサーバー -> ユーザー:認証結果

activate ユーザー

alt 認証成功
webサーバー -> ユーザー:ユーザー名を表示
else 認証失敗
webサーバー -> ユーザー:失敗メッセージを表示

end

ユーザー -> webサーバー:表示（商品)
webサーバー -> DBサーバー:表示処理（商品)
DBサーバー -> webサーバー:表示結果
webサーバー -> ユーザー:表示結果

ユーザー -> webサーバー:検索（商品名)
webサーバー -> DBサーバー:検索処理（商品名)
DBサーバー -> DBサーバー:検索処理
DBサーバー -> webサーバー:検索結果
webサーバー -> ユーザー:検索結果

ユーザー -> webサーバー:カート追加
webサーバー -> DBサーバー:カート追加処理
DBサーバー -> DBサーバー:カート追加処理
DBサーバー -> webサーバー:カート内表示
webサーバー -> ユーザー:カート内表示


opt ログイン中
ユーザー -> webサーバー : ログアウト
webサーバー -> DBサーバー:ログアウト照会
DBサーバー -> DBサーバー:ログアウト処理
DBサーバー -> webサーバー:ログアウト結果
webサーバー -> ユーザー:ログアウト結果
end

deactivate ユーザー
@enduml
```
